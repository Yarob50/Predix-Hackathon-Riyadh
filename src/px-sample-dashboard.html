<link rel="import" href="../bower_components/polymer/polymer.html" />

<!-- Predix components used by this app view -->
<link rel="import" href="../bower_components/px-card/px-card.html" />
<link rel="import" href="../bower_components/px-simple-bar-chart/px-simple-bar-chart.html" />
<link rel="import" href="../bower_components/px-key-value-pair/px-key-value-pair.html" />
<link rel="import" href="../bower_components/px-gauge/px-gauge.html" />
<link rel="import" href="../bower_components/px-card/px-card.html" />
<link rel="import" href="../bower_components/px-vis-timeseries/px-vis-timeseries.html" />
<link rel="import" href="../bower_components/px-vis-pie-chart/px-vis-pie-chart.html"/>
<link rel="import" href="../bower_components/px-vis-pie-chart/px-vis-pie-chart.html"/>
 <link rel="import" href="/bower_components/px-map/px-map.html"/>
<link rel="import" href="/bower_components/px-map/px-map-tile-layer.html"/>
<link rel="import" href="/bower_components/px-simple-line-chart/px-simple-line-chart.html"/>
<link rel="import" href="/bower_components/px-simple-line-chart/px-simple-line-chart.html"/>

<!-- MATERIALIZE CSS ....... -->
<link rel="import" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css"/>
<!-- ///////////////////// -->

<!-- Load styles -->
<link rel="import" href="../css/px-sample-app-styles.html" />




<dom-module id="px-sample-dashboard">
  <template>
    <style include="px-sample-app-styles"></style>

    <!-- By placing several px-key-value-pairs in a flex container, we can easily create a "spine" which is a term
         we use for a row of KPIs or other high level information about an asset on the top of a dashboard. -->

    <div class="spine u-pt">
      <span class="heading--page u-p">West Coast Fleet</span>

      <div class="flex flex--wrap flex--justify">
        <px-key-value-pair class="u-p" key="Total alerts" value="21" size="beta"></px-key-value-pair>
        <px-key-value-pair class="u-p" key="Connected devices" value="583" size="beta"></px-key-value-pair>
        <px-key-value-pair class="u-p" key="Utilization" value="89%" size="beta"></px-key-value-pair>
        <px-key-value-pair class="u-p" key="Faults" value="3" size="beta"></px-key-value-pair>
        <px-key-value-pair class="u-p" key="Output" value="53MW" size="beta"></px-key-value-pair>
      </div>
    </div>

    <!-- This first px-card contains 4 kpis with bar charts and 4 gauges -->

    <px-card header-text="Productivity Details" icon="px-fea:alerts">
      <div class='actions'>
        <px-icon icon='px-utl:app-settings'></px-icon>
      </div>


      <div class="flex flex--wrap flex--justify">
        <div class="gaugeContainer u-p u-mb flex flex--col">
          <div class="flex u-mb">
            <px-key-value-pair id="key1" key="Measured Output" value="110MW" size="delta"></px-key-value-pair>
            <px-simple-bar-chart class="u-ml++" width="100" height="50" chart-data='[ [112,57,53,122,128,120,56] ]' colors='["#8098FF"]'></px-simple-bar-chart>
          </div>
          <px-gauge id="gauge1" class="gauge1" value="85" unit="%" normal='[ [0,100] ]' bar-width="20"></px-gauge>
        </div>


        <div class="gaugeContainer u-p u-mb flex flex--col">
          <div class="flex u-mb">
            <px-key-value-pair id="key2" key="Measured Output" value="15MW" size="delta"></px-key-value-pair>
            <px-simple-bar-chart class="u-ml++" width="100" height="50" chart-data='[ [53,122,128,120,56,94,102] ]' colors='["#7BA662"]'></px-simple-bar-chart>
          </div>
          <px-gauge id="gauge2" class="gauge2" value="10" unit="%" normal='[ [0,100] ]' bar-width="20"></px-gauge>
        </div>


        <div class="gaugeContainer u-p u-mb flex flex--col">
          <div class="flex u-mb">
            <px-key-value-pair id="key3" key="Measured Output" value="121MW" size="delta"></px-key-value-pair>
            <px-simple-bar-chart class="u-ml++" width="100" height="50" chart-data='[ [53,122,128,120,56,94,102] ]' colors='["#E081C9"]'></px-simple-bar-chart>
          </div>

          <px-gauge id="gauge3" class="gauge3" value="65" unit="%" normal='[ [0,100] ]' bar-width="20">
          </px-gauge>

        </div>


        <div class="gaugeContainer u-p u-mb flex flex--col">
          <div class="flex u-mb">
            <px-key-value-pair id="key4" key="Measured Output" value="98MW" size="delta"></px-key-value-pair>
            <px-simple-bar-chart class="u-ml++" width="100" height="50" chart-data='[ [53,122,128,120,56,94,102] ]' colors='["#E9A24B"]'></px-simple-bar-chart>
          </div>
          <px-gauge id="gauge4" class="gauge4" value="90" unit="%" normal='[ [0,100] ]' bar-width="20">
        </px-gauge>
        </div>

        


       


      </div>
      <a class="btn" onclick="updateChart();">Click me :)</a>
      <a href="/index2.html" class="btn" onclick="updateChart();">go to another page</a>


    </px-card>

    <px-card>
            <px-vis-pie-chart prevent-resize width="450" height="450" chart-horizontal-alignment="left" chart-vertical-alignment="center" margin='{"top":"10","bottom":"10","left":"0","right":"0"}' register-config='{"type":"vertical","width":200}' chart-data='[{"percentage":"26","x":15,"y":"IPA"},{"percentage":"2","x":1,"y":"Pils"},{"percentage":"2","x":1,"y":"Lager"},{"percentage":"14","x":8,"y":"Lambic"},{"percentage":"21","x":12,"y":"Stout"},{"percentage":"12","x":7,"y":"Pale Ale"},{"percentage":"16","x":9,"y":"Porter"},{"percentage":"7","x":4,"y":"Heffeweisse"}]' series-config='{"mySerie":{"xAxisUnit":"pints","y":"y","x":"x"}}' donut inner-radius="0" show-title title="Total" title-spacing="5" decimal-percentage="0" max-registers="0" dynamic-menu-config='[{"name":"Log message","action":"function(data) {console.log(\"logging message\")}","eventName":"delete","icon":"px-vis:trash-series"}]'></px-vis-pie-chart>

    <px-card>


    <div style="height:400px; width:600px; display:flex"> <px-map zoom="8" lat="37.7749" lng="-122.4312" flex-to-size disable-scroll-zoom disable-touch-zoom><px-map-tile-layer url='https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'></px-map-tile-layer></px-map></div>


   


        <!-- <px-simple-bar-chart
        width="auto"
        height="300"
        chart-data='[[112,57,53,122,128,120,56,94,102]]'
        colors='["#6FC9FA"]'
        legend-labels='[]'
        legend-order="sequential">
        </px-simple-bar-chart> -->

        <px-simple-bar-chart id="chartx"
        width="500"
        height="300"
        chart-data='[[112,57,53,122,128,120,56,94,102]]'
        colors='["#6FC9FA"]'
        legend-labels='[]'
        legend-order="sequential">
        </px-simple-bar-chart>

        <a class="btn" onclick="updateChart();">Click me :)</a>

        





    </px-card>


    <!-- This last px-card includes a px-vis-timeseries chart. -->
    <px-card class="light-card" header-text="Performance Over Time" icon="px-fea:orchestration">
      <div class='actions'>
        <px-icon icon='px-utl:app-settings'></px-icon>
      </div>
      <px-vis-timeseries
        debounce-resize-timing="250"
        width="700"
        height="300"
        chart-horizontal-alignment="center"
        chart-vertical-alignment="center"
        register-config='{"type":"horizontal"}'
        chart-data="[[chartData]]"
        series-config='{"y0":{"name":"y0","x":"timeStamp","y":"y0","yAxisUnit":"F"},"y1":{"name":"y1","x":"timeStamp","y":"y1","yAxisUnit":"Hz"},"y2":{"name":"y2","x":"timeStamp","y":"y2","yAxisUnit":"C"},"y3":{"name":"y3","x":"timeStamp","y":"y3","yAxisUnit":"F"}}'
        chart-extents='{"x":["dynamic","dynamic"],"y":["dynamic","dynamic"]}'
        x-axis-config='{"title":"Date"}'
        y-axis-config='{"title":"Temperature","titleTruncation":false,"unit":"C"}'>
      </px-vis-timeseries>
    </px-card>


    <px-card header-text="Performance Over Time" style='width:100%'>
        <px-vis-pie-chart series-color-order='["dv-light-green","dv-light-orange","dv-light-red"]' chart-data='[{"percentage":"60","x":15,"y":"IPA"},{"percentage":"20","x":1,"y":"Pils"},{"percentage":"20","x":1,"y":"Lager"}]' use-percentage="true" width="1022.046875" height="350" register-config='{"width":150,"type":"vertical"}' margin='{"top":"10","bottom":"10","left":"0","right":"0"}' series-config='{"mySerie":{"xAxisUnit":"pints","y":"y","x":"x"}}'>
      </px-vis-pie-chart>
    </px-card>


  </template>

     
  
</dom-module>

<!-- jquery :  -->
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous">
</script>
<script src="px-sample-dashboard.js"></script>

<script type="text/javascript">


$(function (){

  

});

function updateChart()
{
  var number1 = getRandomInt(0,100)
  var number2 = getRandomInt(0,100)
  var number3 = getRandomInt(0,100)
  var number4 = getRandomInt(0,100)
  $("#gauge1").attr("value",number1);
  $("#gauge2").attr("value",number2);
  $("#gauge3").attr("value",number3);
  $("#gauge4").attr("value",number4);

  $("#key1").attr("value",number1);
  $("#key2").attr("value",number2);
  $("#key3").attr("value",number3);
  $("#key4").attr("value",number4);

  $("#chartx").attr("chart-data","[[10,20,70,50,40,120,56,94,30]]");
}


// math.random function .................
//from 0 ...max
function getRandomIntFromZero(max) {
  return Math.floor(Math.random() * Math.floor(max));
}

//from min...max
function getRandomArbitrary(min, max) {
  return Math.random() * (max - min) + min;
}

//from min...max Integer
function getRandomInt(min, max) {
  min = Math.ceil(min);
  max = Math.floor(max);
  return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive
}
   
var pieData = [{"percentage":"26","x":15,"y":"IPA"},{"percentage":"2","x":1,"y":"Pils"},{"percentage":"2","x":1,"y":"Lager"},{"percentage":"14","x":8,"y":"Lambic"},{"percentage":"21","x":12,"y":"Stout"},{"percentage":"12","x":7,"y":"Pale Ale"},{"percentage":"16","x":9,"y":"Porter"},{"percentage":"7","x":4,"y":"Heffeweisse"}] 
</script>
